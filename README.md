# DBのデータを追加・取得・更新・削除するやーつ

## 注意
エラー処理が行き届いていない部分や、データーベースのテーブル名やフィールド名は信用された値としてエスケープしていない側面があります。<br>
事前に指定に使う配列に不備がないかの確認をお願いします

## 戻り値
200:成功<br>
100:値が足りません<br>
500:接続不可<br>
エラー:エラーの場合はステータスコードではなくエラーの詳細が入った配列が戻ってきます。<br>
またDBからデータを取得した場合は200のステータスコードは返ってこず、指定したデータのみが返ってきます。<br>
なおDBからデータを取得した場合に起きたエラーはほかの場合と同様に配列で戻ってきます

## 使い方
```php
db_control(リクエスト配列,DBホスト名,DB名,DBユーザー名,DBパスワード);
```

## リクエスト配列の書き方
DBのテーブル名や操作を指定するための配列を「リクエスト配列」とここでは呼びます

### データを追加する場合
```php
$request_sql=[
    "pa"=>"s",
    "dt"=>"test_data", //dbテーブル指定
    "da"=>[ 
           //"フィールド名"=>"追加するデータ"
            "one"=>"データ一つ目!",
            "two"=>"データ2",
            "three"=>"3!!"
            //...
    ]
];
```
### データを更新する場合
```php
$request_sql=[
    "pa"=>"u", 
    "dt"=>"test_data",//dbテーブル指定
    "po"=>[ //更新する行を指定(複数指定はできません)
       //"更新する行を指定するフィールド名"=>"更新する行のデータ"
        "one"=>"データ一つ目"
    ],
    "da"=>[
           //"更新するフィールド名"=>"更新するデータ"
            "three"=>"データ3つ",
            "four"=>"よん!!"
    ]
];
```

### データを削除する場合
```php
$request_sql=[
    "pa"=>"d",
    "dt"=>"test_data",//dbテーブル指定
    "po"=>[//削除する行を指定(複数指定はできません)
      //"削除する行を指定するフィールド名"=>"削除する行のデータ"
        "one"=>"データ一つ目"
    ]

];
```

### フィールドを指定してすべての行のデータを取得する
```php
$request_sql=[
    "pa"=>"g",
    "dt"=>"test_data",//dbテーブル指定
    "st"=>"all",
    "da"=>[
        //データを取得するフィールド名(このフィールド内にあるデータはすべて取得されます)
        "one",
        "two",
        "three",
        "four"
        //...
    ]
];
```

### 特定の値を検索して取得する
```php
$request_sql=[
    "pa"=>"g", 
    "dt"=>"test_data",//dbテーブル指定
    "st"=>"se",
    "po"=>[ //検索する行を指定(複数指定はできません)
        "one"=>"一つ"
    ],
    "da"=>[
      //データを取得するフィールド名(このフィールド内にあるデータはすべて取得されます)
        "one",
        "two",
        "three",
        "four"
    ]

];
```
